import{a3 as b,a4 as g,r as c,W as C,j as e,T as v,g as _,a_ as F,K as S,as as T,G as j,f,a$ as M,i as H,aS as B,b0 as D,h as E,d as I,az as q}from"./react-vendor-CllrtqDN.js";import{u as A,M as R}from"./useDeckFromUrl-3TlTnJir.js";import{S as V}from"./SelectDecksHeader-CuZFQzvD.js";import{h as O,c as o,a as z,A as $,o as m}from"./index-jGxgGxBB.js";import{t as n}from"./utils-UxpEuF8F.js";import{N as G}from"./NoteSubmitButton-B013PIhx.js";import"./vendor-kP31MWcD.js";import"./database-_ZSyCo0Q.js";import"./editor-C2bVNK98.js";import"./rxjs-DNGqVrHU.js";import"./mantine-charts-Bb-jmQwj.js";const J="_newNotesView_1qdiw_1",K="_newNotesMain_1qdiw_21",L="_newNotesEditorContainer_1qdiw_26",P="_newNotesFooter_1qdiw_32",w={newNotesView:J,newNotesMain:K,newNotesEditorContainer:L,newNotesFooter:P};function U({setRequestedFinish:a,deck:i}){const d=b(),s=g(),u=c.useCallback(()=>{d("/notes"+(i?`/${i.id}`:""),{state:{sortFunction:"byCreationDate",sortDirection:!1}})},[i,d]);return C([["Mod+Shift+H",u]]),e.jsxs("div",{className:w.newNotesFooter,children:[e.jsx(v,{label:e.jsxs(e.Fragment,{children:[n("note.edit.see-history-tooltip")," ",e.jsxs(S,{children:[s==="macos"?"Cmd":"Ctrl","+Shift+H"]})]}),children:e.jsx(_,{leftSection:e.jsx(F,{}),variant:"default",onClick:u,tabIndex:-1,children:n("note.edit.see-history-button")})}),e.jsx(G,{finish:()=>a(!0),mode:"new"})]})}function ie(){const a=b(),i=g(),[d]=O(),[s,u]=A(),[p,x]=c.useState(o.Basic),[N,h]=c.useState(!1),r=T.createRef();C([["Mod+J",()=>{var t,l;(t=r.current)==null||t.focus(),(l=r.current)==null||l.click()}]]);const y=c.useMemo(()=>s?z(p).editor({note:null,deck:s,mode:"new",requestedFinish:N,setRequestedFinish:h,setNoteType:x,focusSelectNoteType:()=>{var t,l;(t=r.current)==null||t.focus(),(l=r.current)==null||l.click()}}):null,[s,p,x,N,h]),k=c.useCallback(()=>{a(s?"/deck/"+(s==null?void 0:s.id):"/home")},[a,s]);return u&&!s?e.jsx(R,{}):s?e.jsxs("div",{className:w.newNotesView,children:[e.jsxs("div",{className:w.newNotesMain,children:[e.jsx($,{children:e.jsxs(j,{justify:"space-between",gap:"xs",wrap:"nowrap",children:[e.jsx(f,{onClick:k,variant:"subtle",color:"gray",children:e.jsx(M,{})}),e.jsx(H,{order:3,children:n("note.new.title")}),e.jsx(f,{onClick:()=>a("/settings/editing"),variant:"subtle",color:"gray",children:e.jsx(B,{})})]})}),e.jsx(D,{h:"md"}),e.jsx("div",{className:w.newNotesEditorContainer,children:e.jsxs(E,{children:[e.jsxs(j,{justify:"space-between",children:[e.jsx(j,{gap:"xs",align:"end",children:e.jsx(V,{label:n("note.new.adding-to-deck",{deckName:s.name}),decks:d,disableAll:!0,onSelect:t=>a(`/new/${t}`)})}),e.jsx(v,{label:e.jsxs(e.Fragment,{children:[n("note.new.select-note-type.tooltip"),e.jsxs(S,{children:[i==="macos"?"Cmd":"Ctrl"," + J"]})]}),children:e.jsx(I,{ref:r,value:p,onChange:t=>{x(t!=null?t:o.Basic)},label:n("note.new.select-note-type.label"),data:[{label:m[o.Basic],value:o.Basic},{label:m[o.DoubleSided],value:o.DoubleSided},{label:m[o.Cloze]+n("global.feature-status.in-development"),value:o.Cloze},{label:m[o.ImageOcclusion]+n("global.feature-status.planned"),value:o.ImageOcclusion}]})})]}),e.jsx(q,{p:"md",shadow:"xs",withBorder:!0,children:y})]})})]}),e.jsx(U,{setRequestedFinish:h,deck:s})]}):null}export{ie as default};
