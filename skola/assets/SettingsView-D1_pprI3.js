import{j as e,h as u,k as j,n as N,be as K,bf as M,bg as R,C as I,bh as V,z as k,bi as q,bj as _,r as d,az as G,G as y,bk as U,a3 as z,m as F,o as C,g as T,bl as $,ab as Z,i as E,F as H,bm as W,V as X,O as J,U as Q,aw as Y,bb as ee,bn as te,bo as se,aK as ne,q as ae,bp as ie,bq as oe,br as re,bs as le,aT as ce,bt as de,bu as ue,bv as ge,bw as pe,a0 as L,d as xe,b2 as he,b as o,ak as je,bx as be,by as me,ai as fe,bz as we,bA as Se}from"./react-vendor-CllrtqDN.js";import{j as m,d as D,S,A as ve}from"./index-DRsVs7hl.js";import{t as n}from"./utils-UxpEuF8F.js";import{s as A}from"./setSetting-CXi6ucz2.js";import{D as Ie}from"./DangerousConfirmModal-DL1P1d32.js";import{e as ye,i as ke}from"./database-_ZSyCo0Q.js";import"./vendor-kP31MWcD.js";import"./editor-C2bVNK98.js";import"./mantine-charts-Bb-jmQwj.js";import"./rxjs-DNGqVrHU.js";function Te(){return e.jsxs(u,{gap:"xl",align:"start",children:[e.jsx(j,{size:"sm",children:n("settings.about.description")}),e.jsx(N,{href:"https://www.github.com/h16nning/super-anki",children:"Link to Git Repository"})]})}function De(){const[t]=m("colorSchemePreference"),{setColorScheme:s}=K();return e.jsx(M.Wrapper,{label:n("settings.appearance.color-scheme"),description:n("settings.appearance.color-scheme-description"),children:e.jsx(R,{mt:"xs",value:t,onChange:i=>{A("colorSchemePreference",i||"light"),s(i||"auto")},data:[{value:"light",label:e.jsxs(I,{children:[e.jsx(V,{size:16}),e.jsx(k,{fz:"xs",fw:600,ml:10,children:n("settings.appearance.color-scheme-light")})]})},{value:"dark",label:e.jsxs(I,{children:[e.jsx(q,{size:16}),e.jsx(k,{fz:"xs",fw:600,ml:10,children:n("settings.appearance.color-scheme-dark")})]})},{value:"auto",label:e.jsxs(I,{children:[e.jsx(_,{size:16}),e.jsx(k,{fz:"xs",fw:600,ml:10,children:n("settings.appearance.color-scheme-auto")})]})}]})})}function Ce(){return e.jsx(u,{gap:"xl",align:"start",children:e.jsx(De,{})})}async function Ee(){await D.delete(),console.log("Database reset complete. Please reload the page.")}const Le="_dangerZone_1n5lr_1",Ae={dangerZone:Le};function P(t,s=2){if(!+t)return"0 Bytes";const i=1024,a=s<0?0:s,c=["Bytes","KB","MB","GB","TB"],l=Math.floor(Math.log(t)/Math.log(i));return`${Number.parseFloat((t/i**l).toFixed(a))} ${c[l]}`}async function Be(t){if(navigator.storage&&navigator.storage.estimate){const s=await navigator.storage.estimate();if(s.usage===void 0||s.quota===void 0)return;t({usage:s.usage,quota:s.quota,usageString:P(s.usage),quotaString:P(s.quota)})}}function Pe(){const[t,s]=d.useState({});return d.useEffect(()=>{Be(s)},[]),e.jsx(G,{w:"100%",withBorder:!0,shadow:"xs",p:"sm",radius:"sm",children:t.usage!==void 0&&t.quota!==void 0&&e.jsxs(y,{justify:"space-between",children:[e.jsx(U,{size:80,sections:[{value:t.usage/t.quota*100,color:"forest"}],thickness:8,roundCaps:!0}),e.jsxs(j,{fw:600,children:[t.usageString," / ",t.quotaString," ",n("settings.database.storage-used")]})]})})}function Oe(){const t=z(),[s,i]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(u,{gap:"xl",align:"start",children:[e.jsx(Pe,{}),e.jsxs(F,{icon:e.jsx(C,{}),color:"blue",title:"Database Management",children:[e.jsx(j,{size:"sm",mb:"xs",children:"Use these tools to manage your Skola database. For debugging purposes, you can also clear IndexedDB manually:"}),e.jsxs(j,{size:"xs",c:"dimmed",children:[e.jsx("strong",{children:"Chrome/Edge:"})," DevTools → Application → Storage → IndexedDB → skola_db → Delete",e.jsx("br",{}),e.jsx("strong",{children:"Firefox:"})," DevTools → Storage → IndexedDB → skola_db → Delete",e.jsx("br",{}),e.jsx("strong",{children:"Safari:"})," DevTools → Storage → IndexedDB → skola_db → Delete"]})]}),e.jsx(T,{leftSection:e.jsx($,{}),onClick:async()=>{const a=new Date(Date.now()),c=await ye(D),l=document.createElement("a");l.href=URL.createObjectURL(c),l.download=`skola-export-${a.toLocaleDateString()}-${a.toLocaleTimeString()}.json`,l.click()},children:"Export All"}),e.jsx(Z,{withBorder:!0,className:Ae.dangerZone,children:e.jsxs(u,{gap:"md",align:"start",children:[e.jsx(E,{order:6,children:"Danger Zone"}),e.jsx(j,{size:"sm",children:"This section contains potentially dangerous settings. Proceed with utmost caution!"}),e.jsx(H,{onChange:a=>{if(a){const c=new FileReader;c.onload=async l=>{if(l.target){const g=new Blob([l.target.result],{type:"application/json"});try{await ke(D,g,{overwriteValues:!0})}catch(p){console.error(p)}}},c.readAsText(a)}},accept:".json",children:a=>e.jsx(T,{leftSection:e.jsx(W,{}),color:"red",...a,children:"Import Database (overwrites conflicting data, e.g. settings)"})}),e.jsx(T,{leftSection:e.jsx(X,{}),variant:"filled",color:"red",onClick:()=>i(!0),children:"Delete all Data"})]})})]}),e.jsx(Ie,{dangerousAction:async()=>{await Ee(),t("/home"),window.location.reload()},dangerousDependencies:[],dangerousTitle:"Delete all Data",dangerousDescription:"This will delete all of your data including your cards, decks and settings. There is absolutely no way to recover. Are you sure you want to continue?",opened:s,setOpened:i})]})}function O({title:t,children:s,rightSection:i}){return e.jsxs(u,{gap:"sm",w:"100%",children:[e.jsxs(y,{justify:"space-between",children:[e.jsx(E,{order:4,children:t}),i]}),s]})}var h=(t=>(t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILED=3]="FAILED",t))(h||{});function v({status:t}){switch(t){case 0:return null;case 1:return e.jsx(Y,{size:"xs"});case 2:return e.jsx(Q,{color:"green"});case 3:return e.jsx(J,{color:"red"})}}function r({label:t,description:s,inputType:i,settingsKey:a}){const[c,l]=d.useState(h.NONE),[g]=m(a),[p,b]=d.useState(g!==void 0?g:""),[f,w]=d.useState(!1),[B]=ee(p,250);switch(d.useEffect(()=>{f&&l(h.LOADING)},[f,p]),d.useEffect(()=>b(g!==void 0?g:""),[g]),d.useEffect(()=>{f&&(l(h.LOADING),A(a,B).then(()=>l(h.SUCCESS)).catch(()=>l(h.FAILED)))},[f,g,B,a]),i){case"text":return e.jsx(ae,{value:p,label:t,description:s,onChange:x=>{w(!0),b(x.currentTarget.value)},rightSection:e.jsx(v,{status:c})});case"switch":return e.jsxs(y,{align:"start",wrap:"nowrap",gap:"xs",justify:"space-between",children:[e.jsx(ne,{checked:p,label:t,description:s,labelPosition:"left",onChange:x=>{w(!0),b(x.currentTarget.checked)}}),e.jsx(v,{status:c})]});case"checkbox":return e.jsxs(y,{align:"start",wrap:"nowrap",gap:"xs",justify:"space-between",children:[e.jsx(se,{checked:p,label:t,description:s,onChange:x=>{w(!0),b(x.currentTarget.checked)}}),e.jsx(v,{status:c})]});case"number":return e.jsx(te,{value:p,label:t,description:s,onChange:x=>{w(!0),b(x)},rightSection:e.jsx(v,{status:c})})}return e.jsx(e.Fragment,{children:"Input type not found"})}const ze="_container_ik8ng_1",Fe={container:ze};function Ne({}){return e.jsxs(u,{className:Fe.container,gap:"xl",children:[e.jsxs(O,{title:n("settings.editing.editor-options"),children:[e.jsx(r,{label:n("settings.editing.use-toolbar"),description:n("settings.editing.use-toolbar-description"),settingsKey:"useToolbar",inputType:"checkbox"}),e.jsx(r,{label:n("settings.editing.use-bubble-menu"),description:n("settings.editing-use-bubble-menu-description"),settingsKey:"useBubbleMenu",inputType:"checkbox"}),e.jsx(F,{color:"gray",icon:e.jsx(C,{}),children:n("settings.editing.markdown-hint")})]}),e.jsxs(O,{title:n("settings.editing.individual-options"),children:[e.jsx(r,{label:e.jsx(ie,{}),description:n("settings.editing.show-strikethrough-option"),settingsKey:"showStrikethroughOptionInEditor",inputType:"checkbox"}),e.jsx(r,{label:e.jsx(oe,{}),description:n("settings.editing.show-highlight-option"),settingsKey:"showHighlightOptionInEditor",inputType:"checkbox"}),e.jsx(r,{label:e.jsxs(e.Fragment,{children:[e.jsx(re,{})," ",e.jsx(le,{})]}),description:n("settings.editing.show-list-option"),settingsKey:"showListOptionInEditor",inputType:"checkbox"}),e.jsx(r,{label:e.jsx(ce,{}),description:n("settings.editing.show-code-option"),settingsKey:"showCodeOptionInEditor",inputType:"checkbox"}),e.jsx(r,{label:e.jsxs(e.Fragment,{children:[e.jsx(de,{}),e.jsx(ue,{})]}),description:n("settings.editing.show-options-for-subscript-and-superscript"),settingsKey:"showSubAndSuperScriptOptionInEditor",inputType:"checkbox"}),e.jsx(r,{label:e.jsxs(e.Fragment,{children:[e.jsx(ge,{}),e.jsx(pe,{})]}),description:n("settings.editing.show-link-option"),settingsKey:"showLinkOptionInEditor",inputType:"checkbox"})]})]})}function Ke(){const[t]=m("language"),[s,i]=L();return e.jsx(xe,{value:t,defaultValue:t,label:s("settings.general.language"),description:s("settings.general.language-description"),onChange:a=>(a!==null&&(A("language",a),i.changeLanguage(a),window.location.reload()),a),data:[{value:S.German,label:"Deutsch (Incomplete)"},{value:S.English,label:"English"},{value:S.Swedish,label:"Svenska (Incomplete)"},{value:S.Portuguese,label:"Português (Incompleto)"}]})}function Me(){const[t]=L();return e.jsxs(u,{gap:"xl",align:"start",children:[e.jsx(r,{label:t("settings.general.name"),description:t("settings.general.name-description"),settingsKey:"name",inputType:"text"}),e.jsx(Ke,{}),e.jsx(r,{label:t("settings.general.show-shortcut-hints"),description:t("settings.general.show-shortcut-hints-description"),settingsKey:"showShortcutHints",inputType:"checkbox"}),e.jsx(r,{label:t("settings.general.enable-developer-mode"),description:t("settings.general.enable-developer-mode-description"),settingsKey:"developerMode",inputType:"checkbox"})]})}function Re(){const[t]=L(),[s]=m("globalScheduler_w");return e.jsxs(u,{gap:"xl",align:"start",children:[e.jsx(r,{label:t("settings.learn.enable-visual-feedback"),description:t("settings.learn.enable-visual-feedback-description"),settingsKey:"useVisualFeedback",inputType:"checkbox"}),e.jsx(r,{label:t("settings.learn.requestRetention"),description:t("settings.learn.requestRetentionDescription"),settingsKey:"globalScheduler_requestRetention",inputType:"number"}),e.jsx(r,{label:t("settings.learn.maximumInterval"),description:t("settings.learn.maximumIntervalDescription"),settingsKey:"globalScheduler_maximumInterval",inputType:"number"}),e.jsx(r,{label:t("settings.learn.newToReviewRatio"),description:t("settings.learn.newToReviewRatioDescription"),settingsKey:"learn_newToReviewRatio",inputType:"number"}),e.jsx(j,{children:s.join(",")})]})}function Je(){const[t]=m("developerMode"),s=z(),{section:i}=he();return e.jsxs(u,{gap:"xl",w:"100%",maw:"600px",children:[e.jsx(ve,{children:e.jsx(I,{children:e.jsx(E,{order:3,children:n("settings.title")})})}),e.jsxs(o,{orientation:"horizontal",variant:"pills",value:i,defaultValue:"general",onChange:a=>s(`/settings/${a}`),children:[e.jsxs(o.List,{children:[e.jsx(o.Tab,{value:"general",leftSection:e.jsx(je,{}),children:n("settings.general.title")}),e.jsx(o.Tab,{value:"appearance",leftSection:e.jsx(be,{}),children:n("settings.appearance.title")}),e.jsx(o.Tab,{value:"editing",leftSection:e.jsx(me,{}),children:n("settings.editing.title")}),e.jsx(o.Tab,{value:"learn",leftSection:e.jsx(fe,{}),children:n("settings.learn.title")}),e.jsx(o.Tab,{value:"database",leftSection:e.jsx(we,{}),children:n("settings.database.title")}),e.jsx(o.Tab,{value:"about",leftSection:e.jsx(C,{}),children:n("settings.about.title")}),t?e.jsx(o.Tab,{value:"developer",leftSection:e.jsx(Se,{}),children:n("settings.developer.title")}):null]}),e.jsx(o.Panel,{value:"general",children:e.jsx(Me,{})}),e.jsx(o.Panel,{value:"appearance",children:e.jsx(Ce,{})}),e.jsx(o.Panel,{value:"editing",children:e.jsx(Ne,{})}),e.jsx(o.Panel,{value:"learn",children:e.jsx(Re,{})}),e.jsx(o.Panel,{value:"database",children:e.jsx(Oe,{})}),e.jsx(o.Panel,{value:"about",children:e.jsx(Te,{})}),e.jsx(o.Panel,{value:"Developer",children:n("settings.developer.description")})]})]})}export{Je as default};
